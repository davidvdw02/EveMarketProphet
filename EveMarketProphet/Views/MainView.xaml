<Window x:Class="EveMarketProphet.Views.MainView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:EveMarketProphet.Extensions"
        xmlns:services="clr-namespace:EveMarketProphet.Services"
        xmlns:converters="clr-namespace:EveMarketProphet.Converters"
        mc:Ignorable="d"
        Title="EveMarketProphet (EMP)" Height="768" Width="1024" WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundColor}" FocusVisualStyle="{DynamicResource OrangeFocus}" MinWidth="1024"
        FontFamily="Segoe UI" FontSize="13">

    <Window.Resources>

        <Style x:Key="OrangeFocus">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle StrokeThickness="1" Stroke="{StaticResource AccentColor}" StrokeDashArray="1 2" SnapsToDevicePixels="true"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <converters:StringNullOrEmptyToVisibilityConverter x:Key="EmptyStringToVisibility" />

        <Style TargetType="{x:Type ListViewItem}">
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Margin" Value="0,12,0,0"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>

    </Window.Resources>

    <DockPanel LastChildFill="True" Name="grid">
        <Border DockPanel.Dock="Top" Background="{StaticResource SurfaceColor}" Padding="16,20,16,12">
            <Grid IsEnabled="{Binding IsAvailable}">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

                <WrapPanel Grid.Column="0" VerticalAlignment="Center" Margin="0" ItemHeight="40">
                <TextBox x:Name="textBoxCargospace" ToolTip="Cargo space" Text="{local:SettingsBinding MaxCargo,StringFormat=N0,TargetNullValue=''}" Width="90" Margin="0,0,12,0" HorizontalContentAlignment="Right" VerticalContentAlignment="Center"/>
                <TextBlock Text="m³" VerticalAlignment="Center" Margin="0,0,16,0" Foreground="{StaticResource AccentColor}"/>

                <TextBox x:Name="textBoxISK" Text="{local:SettingsBinding Capital,StringFormat=N0,TargetNullValue=''}" Width="140" Margin="0,0,12,0" HorizontalContentAlignment="Right" VerticalContentAlignment="Center"/>
                <TextBlock Text="ISK" VerticalAlignment="Center" Margin="0,0,16,0" Foreground="{StaticResource AccentColor}"/>

                <CheckBox x:Name="checkBox" Content="High Sec" IsChecked="{local:SettingsBinding IsHighSec}" Margin="0,0,16,0" VerticalAlignment="Center"/>

                <Button x:Name="fetchDataButton" Content="Fetch Data" Command="{Binding FetchDataCommand}" Margin="0,0,12,0" MinWidth="110"/>
                <ComboBox x:Name="regionSelect" ItemsSource="{Binding RegionLists}" SelectedValue="{Binding SelectedRegionList}" SelectedIndex="0" DisplayMemberPath="Label" Margin="0,0,12,0" Width="140" IsReadOnly="True"/>
                <Button x:Name="findRoutesButton" Content="Find Routes" Command="{Binding FindRoutesCommand}" Margin="0,0,12,0" MinWidth="110" Background="{StaticResource AccentColor}" Foreground="{StaticResource BackgroundColor}"/>

                <Grid Width="220" Margin="0,0,12,0">
                    <ComboBox x:Name="fromStationSearch"
                              ItemsSource="{Binding FromStationSuggestions}"
                              Text="{Binding FromStationQuery, UpdateSourceTrigger=PropertyChanged}"
                              IsEditable="True"
                              IsTextSearchEnabled="True"
                              StaysOpenOnEdit="True"
                              HorizontalContentAlignment="Stretch"
                              MinDropDownWidth="220"/>
                    <TextBlock Text="Search from station..." Margin="12,0,0,0" VerticalAlignment="Center" Foreground="#FF8B93A7" IsHitTestVisible="False">
                        <TextBlock.Visibility>
                            <Binding Path="FromStationQuery" Converter="{StaticResource EmptyStringToVisibility}"/>
                        </TextBlock.Visibility>
                    </TextBlock>
                </Grid>

                <Button x:Name="filterButton" Content="Reset Filters" Command="{Binding ClearFiltersCommand}" Margin="0,0,12,0" MinWidth="110"/>
                </WrapPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center">
                <Button x:Name="button" Content="&#xE0A5; Donate" FontFamily="Segoe UI Symbol" Margin="0,0,12,0" MinWidth="100" Command="{Binding OpenDonationCommand}"/>
                <Button x:Name="settingsButton" Content="&#xE115; Settings" FontFamily="Segoe UI Symbol" Command="{Binding OpenSettingsCommand}" Margin="0,0,12,0" MinWidth="110"/>
                <Button x:Name="button_Copy" Content="&#xE11B;" Command="{Binding OpenAboutCommand}" FontFamily="Segoe UI Symbol" Width="44"/>
                </StackPanel>
            </Grid>
        </Border>

        <Border DockPanel.Dock="Bottom" Background="{StaticResource SurfaceColor}" Padding="0,0,0,12">
            <StatusBar Background="Transparent">
                <StatusBar.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="100" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="140" />
                            </Grid.ColumnDefinitions>
                        </Grid>
                    </ItemsPanelTemplate>
                </StatusBar.ItemsPanel>

                <StatusBarItem>
                    <TextBlock Text="Busy" Visibility="Hidden"/>
                </StatusBarItem>
                <Separator Grid.Column="1" />
                <StatusBarItem Grid.Column="2">
                    <TextBlock Name="statusUpdate" Text="{Binding StatusBarText}"/>
                </StatusBarItem>
                <Separator Grid.Column="3" />

                <StatusBarItem Grid.Column="4" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Center">
                    <ProgressBar Name="progress" Minimum="0" Maximum="100" IsIndeterminate="True" Visibility="{Binding ShowProgressBar}" Margin="12,0,0,0"/>
                </StatusBarItem>
            </StatusBar>
        </Border>

        <ListView x:Name="listBoxResults" Grid.IsSharedSizeScope="True" ItemsSource="{Binding TripView, Mode=OneWay}" ItemTemplate="{StaticResource TripTemplate}" HorizontalContentAlignment="Stretch" ScrollViewer.CanContentScroll="False" ScrollViewer.HorizontalScrollBarVisibility="Disabled" Background="Transparent" BorderThickness="0" Margin="24" Padding="0">
        </ListView>

    </DockPanel>

</Window>
